sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Filter"],function(e,t){"use strict";return e.extend("shipstatus.ext.ListReportAfterHeader",{onInit:async function(){await this._refreshUserModel();this._fetchAndSetLogo()},_refreshUserModel:async function(){const e=this.getOwnerComponent().getModel("userModel");let t=sap.ui.require.toUrl("shipstatus").split("/resources")[0];if(t===".")t="";const o=`${t}/user-api/attributes`;try{const t=await fetch(o);const s=await t.json();e.setData(s);console.log("User model refreshed:",s)}catch(e){console.error("Failed to fetch user info",e)}},_fetchAndSetLogo:function(){const e=this.getView();const o=this.getOwnerComponent().getModel("userModel");const s=o?o.getData():{};const n=s.ManufacturerNumber;const r=e.byId("logoImage");let c=sap.ui.require.toUrl("shipstatus").split("/resources")[0];if(c===".")c="";const i=`${c}/images/MCKCAN1.jpg`;if(!n){console.warn("No ManufacturerNumber found; using fallback logo.");r.setSrc(i);return}const a=this.getOwnerComponent().getModel("logo");const u=new t("manufacturerNumber","EQ",n);const l=a.bindList("/MediaFile",undefined,undefined,[u]);l.requestContexts().then(e=>{if(e.length>0){const t=e[0].getObject();const o=t.url.replace(/^.*(?=\/odata\/v4\/media)/,"");const s=c+o;r.setSrc(s)}else{console.warn("No logo found; using fallback.");r.setSrc(i)}}).catch(e=>{console.error("Error fetching logo:",e);r.setSrc(i)})}})});
//# sourceMappingURL=ListReportAfterHeader.controller.js.map