<mvc:View controllerName="invoicehis.controller.View1"
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns="sap.m" 
    xmlns:f="sap.f" 
    xmlns:core="sap.ui.core" 
    xmlns:l="sap.ui.layout" 
    xmlns:t="sap.ui.table"
    xmlns:sf="sap.ui.comp.smartfilterbar" 
    xmlns:st="sap.ui.comp.smarttable" 
    xmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" 
    displayBlock="true">
    <App id="app">
        <f:DynamicPage id="dynamicPage" showFooter="true">
            <f:header>
                <f:DynamicPageHeader id="_IDGenDynamicPageHeader1" class="noPadding">
                    <FlexBox id="_IDGenFlexBox6" width="100%" direction="Row" wrap="Wrap" justifyContent="SpaceBetween" class="headerPadding sapUiMediumMarginBottom borderBottom">
                        <HeaderContainer id="container1" scrollStep="200" height="100px">
                            <FlexBox id="_IDGenFlexBox7" alignItems="Center" height="100px">
                                <FlexBox id="_IDGenFlexBox8" alignItems="Center" height="75px" class="imgBG">
                                    <Image id="logoImage" src="" width="125px" decorative="false" press="onLogoPressed" tooltip="SAP Logo" >
                                        <layoutData>
                                            <OverflowToolbarLayoutData id="_IDGenOverflowToolbarLayoutData1" priority="NeverOverflow"/>
                                        </layoutData>
                                    </Image>
                                </FlexBox>
                            </FlexBox>  
                        </HeaderContainer>
                        <HeaderContainer id="container2" scrollStep="200">
                            <GenericTile id="_IDGenGenericTile1" class="sapUiTinyMarginBegin sapUiTinyMarginTop tileLayout" header="{i18n>lastRefresh}" subheader="3/22/2024 6:30:57AM" frameType="OneByHalf">
                                <TileContent id="_IDGenTileContent1" class="refreshTitle" footer="Footer Text">
                                    <Text id="_IDGenText1" class="refreshText" text="3/22/2024 6:30:57AM"/>
                                </TileContent>
                            </GenericTile>
                        </HeaderContainer>
                    </FlexBox>
                    <sf:SmartFilterBar 
                        id="bar0" 
                        entitySet="INVOICEHISTORY" 
                        useDateRangeType="true" 
                        persistencyKey="SmartFilterBar_INVOICEHISTORY" 
                        smartVariant="pageVariant" 
                        liveMode="true" 
                        search="onSearch"
                        filterChange="onFilterChange"
                    >
                        <sf:controlConfiguration>
                            <sf:ControlConfiguration id="_IDGenControlConfiguration"
                                key="BUDAT"
                                visibleInAdvancedArea="true"
                                conditionType="{
                                    module: 'sap.ui.comp.config.condition.DateRangeType'
                                }"
                            />
                        </sf:controlConfiguration>
                        <sf:controlConfiguration>
                            <sf:ControlConfiguration id="customCurrentFilter"
                                key="CURRENT"
                                visibleInAdvancedArea="true"
                                label="Current/Legacy"
                            >
                                <sf:customControl>
                                    <ComboBox id="currentFilterBox" selectedKey="{filters>/currentStatus}">
                                        <items>
                                            <core:Item id="_IDGenItem2" key="" text="All"/>
                                            <core:Item id="_IDGenItem" key="Y" text="Current"/>
                                            <core:Item id="_IDGenItem1" key="N" text="Legacy"/>
                                        </items>
                                    </ComboBox>
                                </sf:customControl>
                            </sf:ControlConfiguration>
                        </sf:controlConfiguration>
                    </sf:SmartFilterBar>
                    <Panel id="_IDGenPanel" expandable="true" expanded="true" headerText="{i18n>panelHeader}">

                        <HeaderContainer id="container4" scrollStep="200" orientation="Horizontal" gridLayout="true" class="mck_HeaderContainer">
                        
                            <FlexBox id="_IDGenFlexBox1" direction="Column" class="mck_Tile">
                                <Title id="_IDGenTitle1" class="mck_TileContentTitle" text="{i18n>tileTitle1}"/>
                                <Text id="TileContent1" class="mck_TileContent" text=""/>
                            </FlexBox>
                            <FlexBox id="_IDGenFlexBox2" direction="Column" class="mck_Tile">
                                <Title id="_IDGenTitle2" class="mck_TileContentTitle" text="{i18n>tileTitle2}"/>
                                <Text id="TileContent2" class="mck_TileContent" text=""/>
                            </FlexBox>
                            <!-- <FlexBox id="_IDGenFlexBox21" direction="Column" class="mck_Tile">
                                <Title id="_IDGenTitle21" class="mck_TileContentTitle" text="{i18n>tileTitle3}"/>
                                <HBox justifyContent="SpaceBetween">
                                    <VBox id="_IDGenHBox" justifyContent="SpaceBetween" class="sapUiTinyMarginBottom">
                                        <Label text="Historical data from before the new implementation of the portal"/>
                                        <ObjectStatus id="_IDGenObjectStatus1"
                                                icon="sap-icon://history"
                                                inverted="true"
                                                state="Information"
                                                text="Historical"
                                                class="sapUiTinyMarginEnd"/>

                                        
                                    </VBox>
                                    <VBox class="sapUiTinyMarginBottom" id="_IDGenHBox12" >
                                        <Label text="Current data from new implementation of the portal"/>
                                        <ObjectStatus id="_IDGenObjectStatus22"
                                                icon="sap-icon://present"
                                                inverted="true"
                                                state="Success"
                                                text="Current"/>
                                    </VBox>
                                </HBox>
                            </FlexBox>     -->
                        
                        
                        </HeaderContainer>
                    </Panel>
                </f:DynamicPageHeader>
            </f:header>
            <f:content>
                <st:SmartTable 
                    xmlns:cd="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" 
                    width="100%" 
                    direction="Column" 
                    fitContainer="true" 
                    tableType="Table" 
                    header="{i18n>tableTitle}" 
                    enableAutoBinding="true" 
                    id="table0" 
                    smartFilterId="bar0" 
                    cd:w5g.dt.context="/INVOICEHISTORY" 
                    entitySet="INVOICEHISTORY" 
                    placeToolbarInTable="true" 
                    useExportToExcel="true" 
                    beforeExport="onBeforeExport" 
                    useVariantManagement="true" 
                    useTablePersonalisation="true" 
                    showRowCount="true" 
                    persistencyKey="SmartTableAnalytical_Explored" 
                    demandPopin="true" 
                    enableAutoColumnWidth="true" 
                    class="sapUiResponsiveContentPadding sapUiLargeMarginBottom"
                >
                    <t:Table 
                        id="table" 
                        selectionMode="None"
                        alternateRowColors="true" >
                        <t:columns>
                            <t:Column id="_IDGenColumn10" width='7.813rem'>
                                <t:customData>
                                    <core:CustomData key="p13nData" value='\{"columnKey": "BELNR", "leadingProperty": "BELNR", "columnIndex": 8}'/>
                                </t:customData>
                                <Text id="_IDGenText30" text="Invoice #"></Text>
                                <t:template>
                                    <Link id="invoice" text="{BELNR}" press=".onInvoiceClick"/>
                                </t:template>
                            </t:Column>
                            <t:Column id="_IDGenColumn" width='6.5rem'>
                                <t:customData>
                                    <core:CustomData key="p13nData" value='\{"columnKey": "BUDAT", "leadingProperty": "BUDAT", "columnIndex": 9}'/>
                                </t:customData>
                                <Text id="_IDGenText6" text="Invoice Date"></Text>
                                <t:template>
                                    <Text id="_IDGenText9" text="{path: 'BUDAT', type: 'sap.ui.model.odata.type.Date'}" />
                                </t:template>
                            </t:Column>
                            <t:Column id="_IDGenColumn6" width='7rem' hAlign="End">
                                <t:customData>
                                    <core:CustomData key="p13nData" value='\{"columnKey": "TSL_AMOUNT", "leadingProperty": "TSL_AMOUNT", "columnIndex": 10}'/>
                                    </t:customData>
                                <Text id="_IDGenText2" text="$ Amount"></Text>
                                <t:template>
                                    <Text id="_IDGenText10" text="{path: 'TSL_AMOUNT', formatter: '._formatCurrency'}" />
                                </t:template>
                            </t:Column>
                            <t:Column id="_IDGenColumn1" width='7rem'>
                                <t:customData>
                                    <core:CustomData key="p13nData" value='\{"columnKey": "LFDAT", "leadingProperty": "LFDAT", "columnIndex": 15}'/>
                                </t:customData>
                                <Text id="_IDGenText3" text="Delivery Date"></Text>
                                <t:template>
                                    <Text id="_IDGenText11" text="{path: 'LFDAT', type: 'sap.ui.model.odata.type.Date'}" />
                                </t:template>
                            </t:Column>
                            <t:Column id="_IDGenColumn11" width='7rem'>
                                <t:customData>
                                    <core:CustomData key="p13nData" value='\{"columnKey": "CURRENT", "leadingProperty": "CURRENT", "columnIndex": 0}'/>
                                </t:customData>
                                <Text id="_IDGenText31" text="Current/Legacy"></Text>
                                <t:template>
                                    <ObjectStatus id="_IDGenObjectStatus"
                                    core:require="{
                                            Formatter: 'invoicehis/model/formatter'
                                        }"
                                        icon="{path: 'CURRENT', formatter:'Formatter.yesNoIcon'}"
                                        inverted="true"
                                        tooltip="{= ${CURRENT} === 'YES' ? 'Captured from the new system post-migration and is up-to-date.' : 'Pulled from the previous system before the upgrade/migration'}"
                                        state="{path: 'CURRENT', formatter: 'Formatter.yesNoIconColor'}"
                                        text="{= ${CURRENT} === 'Y' ? 'Current' : 'Legacy'}"/>
                                </t:template>
                            </t:Column>

                            
                        </t:columns> 
                    </t:Table>
                </st:SmartTable>
                
            </f:content>
            <f:footer>
                <OverflowToolbar id="_IDGenOverflowToolbar1" class="footer">
                    <!-- Added by Bryan Cash in order to make the footer fully responsive for mobile devices -->                    
                    <FlexBox id="_IDGenFlexBox9" width="100%" justifyContent="SpaceBetween" wrap="Wrap">
                        <FlexBox id="_IDGenFlexBox10">
                            <ObjectIdentifier id="_IDGenObjectIdentifier1"
                                title="{i18n>totals}"
                                class="footerTitle"/>
                        </FlexBox>
                        <FlexBox id="_IDGenFlexBox11" >
                            <HBox id="_IDGenHBox1" class="sapUiSmallMarginEnd">
                                <Label id="_IDGenLabel1" text="{i18n>footerLabel1}:" class="cssLabelTotal"/>
                                <Text id="FooterContent1" class="footerText" text ="{path: 'footerCounts>/TSL_AMOUNT', formatter: '._formatCurrency'}"/>
                            </HBox>
                            <HBox id="_IDGenHBox2" class="sapUiSmallMarginEnd">
                                <Label id="_IDGenLabel2" text="{i18n>footerLabel2}:" class="cssLabelTotal"/>
                                <Text id="FooterContent2" class="footerText" text ="{path: 'footerCounts>/CAL_PST', formatter: '._formatCurrency'}"/>
                            </HBox>
                            <HBox id="_IDGenHBox3" class="sapUiSmallMarginEnd">
                                    <Label id="_IDGenLabel3" text="{i18n>footerLabel3}:" class="cssLabelTotal"/>
                                <Text id="FooterContent3" class="footerText" text ="{path: 'footerCounts>/CAL_GST', formatter: '._formatCurrency'}"/>
                            </HBox>	
                        </FlexBox>
                    </FlexBox>
                </OverflowToolbar>
            </f:footer>
        
        </f:DynamicPage>
    </App>
</mvc:View>