sap.ui.define(["sap/ui/core/mvc/Controller","bckorders/model/formatter"],(t,e)=>{"use strict";return t.extend("bckorders.controller.View1",{formatter:e,onInit:function(){const t=this.getView().byId("table0");const e=t.getTable();e.attachEvent("rowsUpdated",this._calculateTotals.bind(this))},_calculateTotals:function(){const t=this.getView().byId("table0");const e=t.getTable();const o=e.getBinding("rows");if(!o){console.warn("Table binding is missing.");return}const n=o.getContexts(0,o.getLength());if(!n){console.warn("Data is not available for calculation.");return}const a=n.reduce((t,e)=>{const o=e.getObject();if(!o)return t;t.totalBackOrders++;t.impactedCustomers.add(o.KUNRE_ANA);t.totalItemsOnBackOrder.add(o.MATNR);t.totalUnitsBackOrdered+=parseFloat(o.BACK_ORD_QTY||0);t.totalExtension+=parseFloat(o.EXTENSION||0);if(o.DATE_DIFF>0&&!o.UDATE){t.totalUnitsToBeReceived+=parseFloat(o.BACK_ORD_QTY||0)}return t},{totalBackOrders:0,impactedCustomers:new Set,totalItemsOnBackOrder:new Set,totalUnitsBackOrdered:0,totalUnitsToBeReceived:0,totalExtension:0});const s=a.impactedCustomers.size;const i=a.totalItemsOnBackOrder.size;const r=this.formatter.formatCurrency(a.totalExtension,"USD");const l=this.formatter.formatNumber(a.totalUnitsBackOrdered);this._updateTile("TileContent1",a.totalBackOrders);this._updateTile("TileContent2",s);this._updateTile("TileContent3",i);this._updateTile("TileContent4",a.totalUnitsBackOrdered);this._updateTile("TileContent5",a.totalUnitsToBeReceived);this._updateFooter("footerText1",l);this._updateFooter("footerText2",r)},_updateTile:function(t,e){const o=this.byId(t);if(o){o.setText(e)}else{console.warn(`Tile with ID ${t} not found.`)}},_updateFooter:function(t,e){const o=this.byId(t);if(o){o.setText(e)}else{console.warn(`Footer with ID ${t} not found.`)}}})});
//# sourceMappingURL=View1.controller.js.map