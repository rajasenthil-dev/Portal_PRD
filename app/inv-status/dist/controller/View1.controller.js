sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox"],(t,e)=>{"use strict";return t.extend("invstatus.controller.View1",{onInit:async function(){const t=this.getView();const r=t.byId("bar0");t.setBusy(true);r.attachInitialized(function(){t.setBusy(false)});const o=this.getOwnerComponent().getModel("userModel");const a=o?o.getData():{};const s=a.ManufacturerNumber;const i=this.getOwnerComponent().getModel("logo");var n=sap.ui.require.toUrl("invstatus").split("/resources")[0];if(n==="."){n=""}const u=n+"/images/MCKCAN1.jpg";if(!s){console.warn("No ManufacturerNumber in user model. Showing fallback logo.");t.byId("logoImage").setSrc(u);return}const c=new sap.ui.model.Filter("manufacturerNumber","EQ",s);const l=i.bindList("/MediaFile",undefined,undefined,[c]);l.requestContexts().then(function(e){if(e&&e.length>0){const r=e[0].getObject();const o=r.url.replace(/^.*(?=\/odata\/v4\/media)/,"");const a=n+o;t.byId("logoImage").setSrc(a)}else{console.warn("No matching logo found. Fallback image used.");t.byId("logoImage").setSrc(u)}}.bind(this)).catch(function(e){console.error("Binding error:",e);t.byId("logoImage").setSrc(u)}.bind(this));var h=this.getOwnerComponent().getModel();const d=this.getView().byId("table0");const m=d.getTable();this.bAuthorizationErrorShown=false;h.attachRequestFailed(function(t){var r=t.getParameters();if(r.response.statusCode==="403"){m.setNoData("No data available due to authorization restrictions");m.setBusy(false);if(!this.bAuthorizationErrorShown){this.bAuthorizationErrorShown=true;e.error("You do not have the required permissions to access this report.",{title:"Unauthorized Access",id:"messageBoxId1",details:"Permission is required to access this report. Please contact your administrator if you believe this is an error or require access.",contentWidth:"100px"})}}});m.attachEvent("rowsUpdated",this.calculateTotals.bind(this))},calculateTotals:function(){var t=this.getView().byId("table0");var e=t.getTable();var r=e.getBinding("rows");var o=r.getContexts(0,r.getLength());var a=0;var s=0;var i=0;var n=0;var u=0;var c=0;var l=0;var h=0;var d=0;var m=0;o.forEach(function(t){a+=parseFloat(t.getProperty("OPEN_STOCK"))||0;s+=parseFloat(t.getProperty("QUARANTINE"))||0;i+=parseFloat(t.getProperty("RETAINS"))||0;n+=parseFloat(t.getProperty("QUALITY_HOLD"))||0;u+=parseFloat(t.getProperty("RETURNS_CAL"))||0;c+=parseFloat(t.getProperty("RECALLS"))||0;l+=parseFloat(t.getProperty("INVENTORY_HOLD"))||0;h+=parseFloat(t.getProperty("RELABEL_QTY"))||0;d+=parseFloat(t.getProperty("DAMAGE_DESTRUCTION"))||0;m+=parseFloat(t.getProperty("SAMPLE_QTY"))||0});var g=this._formatNumber(a);var b=this._formatNumber(s);var f=this._formatNumber(i);var p=this._formatNumber(n);var v=this._formatNumber(u);var T=this._formatNumber(c);var y=this._formatNumber(l);var I=this._formatNumber(h);var N=this._formatNumber(d);var x=this._formatNumber(m);this.byId("footerText1").setText(g);this.byId("footerText2").setText(b);this.byId("footerText3").setText(f);this.byId("footerText4").setText(p);this.byId("footerText5").setText(v);this.byId("footerText6").setText(T);this.byId("footerText7").setText(y);this.byId("footerText8").setText(I);this.byId("footerText9").setText(N);this.byId("footerText10").setText(x)},_formatNumber:function(t){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(t)}})});
//# sourceMappingURL=View1.controller.js.map