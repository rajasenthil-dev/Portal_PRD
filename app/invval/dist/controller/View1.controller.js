sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel"],(t,e)=>{"use strict";return t.extend("invval.controller.View1",{onInit:function(){var t=new e({counts:{OpenStock:0,Quarantine:0,Damage:0,Retains:0,QualityHold:0,Returns:0,Recalls:0}});var a=new e({counts:{TotalCost:0,OpenStock:0,Quarantine:0,Damage:0,Retains:0,QualityHold:0,Returns:0,Recalls:0}});this.getView().setModel(t,"summaryCounts");this.getView().setModel(a,"footerCounts");const r=new sap.ui.model.odata.v2.ODataModel("/odata/v2/inventory");this.getView().setModel(r);var o=this.getView().byId("table0");var n=o.getTable();n.bindRows({path:"/INVENTORYVALUATION",parameters:{$top:100,$skip:0}});n.attachEventOnce("rowsUpdated",()=>{const t=n.getDomRef("vsb");if(t){t.addEventListener("scroll",this.onScrollLoad.bind(this))}});n.attachEvent("rowsUpdated",this._calculateTotals.bind(this))},onScrollLoad:function(t){const e=this.byId("table0");const a=t.target.scrollTop;const r=t.target.scrollHeight-t.target.clientHeight;if(a===r){this.loadMoreData(e)}},loadMoreData:function(t){const e=t.getBinding("rows");const a=e.getLength();e.suspend();e.updateParameters({$top:100,$skip:a});e.resume()},_calculateTotals:function(){var t=this.getView().byId("table0");var e=t.getTable();var a=e.getBinding("rows");var r=a.getContexts(0,a.getLength());var o={OpenStock:0,Quarantine:0,Damage:0,Retains:0,QualityHold:0,Returns:0,Recalls:0};var n={TotalCost:0,OpenStock:0,Quarantine:0,Damage:0,Retains:0,QualityHold:0,Returns:0,Recalls:0};r.forEach(function(t){o.OpenStock+=parseFloat(t.getProperty("OPEN_STOCK"))||0;o.Quarantine+=parseFloat(t.getProperty("QUARANTINE"))||0;o.Damage+=parseFloat(t.getProperty("DAMAGE_DESTRUCTION"))||0;o.Retains+=parseFloat(t.getProperty("RETAINS"))||0;o.QualityHold+=parseFloat(t.getProperty("QUALITY_HOLD"))||0;o.Returns+=parseFloat(t.getProperty("RETURNS_CAL"))||0;o.Recalls+=parseFloat(t.getProperty("RECALLS"))||0;n.TotalCost+=parseFloat(t.getProperty("TOTAL_COST"))||0;n.OpenStock+=parseFloat(t.getProperty("OPEN_STOCK"))||0;n.Quarantine+=parseFloat(t.getProperty("QUARANTINE"))||0;n.Damage+=parseFloat(t.getProperty("DAMAGE_DESTRUCTION"))||0;n.Retains+=parseFloat(t.getProperty("RETAINS"))||0;n.QualityHold+=parseFloat(t.getProperty("QUALITY_HOLD"))||0;n.Returns+=parseFloat(t.getProperty("RETURNS_CAL"))||0;n.Recalls+=parseFloat(t.getProperty("RECALLS"))||0});this.getView().getModel("summaryCounts").setProperty("/counts",o);this.getView().getModel("footerCounts").setProperty("/counts",n)},_formatNumber:function(t){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(t)},_formatCurrency:function(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)},_formatDate:function(t){if(!t)return"";let e;if(typeof t==="string"){if(t.length===8){const a=t.slice(0,4)+"-"+t.slice(4,6)+"-"+t.slice(6,8);e=new Date(a+"T00:00:00Z")}else{return""}}else if(t instanceof Date){e=new Date(t.getTime())}else{return""}if(isNaN(e.getTime())){return""}e.setMinutes(e.getMinutes()+e.getTimezoneOffset());const a=sap.ui.core.format.DateFormat.getDateInstance({style:"medium"});return a.format(e)},_removeLeadingZeros:function(t){return t?String(parseInt(t,10)):t}})});
//# sourceMappingURL=View1.controller.js.map