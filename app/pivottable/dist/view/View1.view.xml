<mvc:View controllerName="pivottable.controller.View1"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    height="100%">
    <Page id="mainPage" title="Sales Analysis Report">
        <content>
            <!-- Manual Filter Bar for maximum compatibility -->
            <Panel id="_IDGenPanel" class="sapUiResponsiveMargin" width="auto" expandable="true" expanded="true">
                 <headerToolbar>
                    <OverflowToolbar id="_IDGenOverflowToolbar">
                        <Title id="_IDGenTitle" text="Filters"/>
                    </OverflowToolbar>
                </headerToolbar>
                <content>
                    <VBox id="_IDGenVBox">
                        <HBox id="_IDGenHBox" wrap="Wrap">
                            <VBox id="_IDGenVBox1" class="sapUiSmallMargin">
                                <Label id="_IDGenLabel" text="Sales Organization"/>
                                <Input id="filterSalesOrg" width="150px"/>
                            </VBox>
                            <VBox id="_IDGenVBox2" class="sapUiSmallMargin">
                                <Label id="_IDGenLabel1" text="Customer"/>
                                <Input id="filterCustomer" width="150px"/>
                            </VBox>
                            <VBox id="_IDGenVBox3" class="sapUiSmallMargin">
                                <Label id="_IDGenLabel2" text="Product"/>
                                <Input id="filterProduct" width="150px"/>
                            </VBox>
                            <VBox id="_IDGenVBox4" class="sapUiSmallMargin">
                                <Label id="_IDGenLabel3" text="Billing Date"/>
                                <DateRangeSelection id="filterDate" width="250px"/>
                            </VBox>
                        </HBox>
                        <Toolbar id="_IDGenToolbar">
                            <ToolbarSpacer id="_IDGenToolbarSpacer"/>
                            <Button id="_IDGenButton" text="Search" type="Emphasized" press=".onFilterBarSearch"/>
                            <Button id="_IDGenButton1" text="Clear" press=".onFilterBarClear"/>
                        </Toolbar>
                    </VBox>
                </content>
            </Panel>

            <!-- Summary Panel (No changes here) -->
            <Panel id="_IDGenPanel1" class="sapUiResponsiveMargin" width="auto" expandable="true" expanded="true">
                <headerToolbar>
                    <OverflowToolbar id="_IDGenOverflowToolbar1">
                        <Title id="_IDGenTitle1" text="Overall Summary"/>
                    </OverflowToolbar>
                </headerToolbar>
                <content>
                    <FlexBox
                        id="summaryBox"
                        alignItems="Start"
                        justifyContent="SpaceAround"
                        wrap="Wrap">
                        <GenericTile id="_IDGenGenericTile" class="sapUiTinyMargin" header="Total Sales" subheader="USD">
                            <TileContent id="_IDGenTileContent">
                                <NumericContent id="totalSales" value="0.00" withMargin="false" />
                            </TileContent>
                        </GenericTile>
                        <GenericTile id="_IDGenGenericTile1" class="sapUiTinyMargin" header="Total Invoices">
                            <TileContent id="_IDGenTileContent1">
                                <NumericContent id="totalInvoices" value="0" withMargin="false" />
                            </TileContent>
                        </GenericTile>
                        <GenericTile id="_IDGenGenericTile2" class="sapUiTinyMargin" header="Total Lines">
                            <TileContent id="_IDGenTileContent2">
                                <NumericContent id="totalLines" value="0" withMargin="false" />
                            </TileContent>
                        </GenericTile>
                        <GenericTile id="_IDGenGenericTile3" class="sapUiTinyMargin" header="Total Units">
                            <TileContent id="_IDGenTileContent3">
                                <NumericContent id="totalUnits" value="0" withMargin="false" />
                            </TileContent>
                        </GenericTile>
                    </FlexBox>
                </content>
            </Panel>

            <!-- Stable sap.m.Table to display data -->
            <Table
                id="salesTable"
                inset="false"
                items="{path: '/PIVOTTABLE'}"
                class="sapUiResponsiveMargin">
                <headerToolbar>
                    <OverflowToolbar id="_IDGenOverflowToolbar2">
                        <Title id="_IDGenTitle2" text="Data Breakdown"/>
                        <ToolbarSpacer id="_IDGenToolbarSpacer1"/>
                        <Button id="_IDGenButton2" text="Ladega Products" press=".onFilterLadega" type="Emphasized"/>
                        <Button id="_IDGenButton3" text="Cystadrops Products" press=".onFilterCystadrops" type="Emphasized"/>
                    </OverflowToolbar>
                </headerToolbar>
                <columns>
                    <Column id="_IDGenColumn"><Text id="_IDGenText1" text="Customer"/></Column>
                    <Column id="_IDGenColumn1"><Text id="_IDGenText2" text="Product"/></Column>
                    <Column id="_IDGenColumn2" hAlign="End"><Text id="_IDGenText3" text="Net Value"/></Column>
                    <Column id="_IDGenColumn3" hAlign="End"><Text id="_IDGenText4" text="Invoiced Qty"/></Column>
                    <Column id="_IDGenColumn4"><Text id="_IDGenText5" text="Province"/></Column>
                    <Column id="_IDGenColumn5"><Text id="_IDGenText6" text="Billing Date"/></Column>
                </columns>
                <items>
                    <ColumnListItem id="_IDGenColumnListItem">
                        <cells>
                            <Text id="_IDGenText7" text="{KUNAG_ANA_SOLD_TO_PARTY}"/>
                            <Text id="_IDGenText8" text="{MATNR_MATERIAL}"/>
                            <Text id="_IDGenText9" text="{
                                path: 'NETWR_NET_VALUE',
                                type: 'sap.ui.model.type.Currency',
                                formatOptions: { showMeasure: false }
                            }"/>
                            <Text id="_IDGenText10" text="{FKIMG_INVOICED_QUANTITY}"/>
                            <Text id="_IDGenText11" text="{PROVINCE}"/>
                            <Text id="_IDGenText12" text="{
                                path: 'FKDAT_ANA_BILLING_DATE',
                                type: 'sap.ui.model.type.Date',
                                formatOptions: { style: 'medium' }
                            }"/>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
    </Page>
</mvc:View>