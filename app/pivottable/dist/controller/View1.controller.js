sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageToast"],function(t,e,s,a,i){"use strict";return t.extend("pivottable.controller.View1",{onInit:function(){this._updateSummaryPanel([])},onFilterBarSearch:function(){const t=[];const e=this.getView();const i=e.byId("filterSalesOrg").getValue();const n=e.byId("filterCustomer").getValue();const l=e.byId("filterProduct").getValue();const o=e.byId("filterDate");const r=o.getDateValue();const u=o.getSecondDateValue();if(i){t.push(new s("VKORG_ANA_SALES_ORGANIZATION",a.Contains,i))}if(n){t.push(new s("KUNAG_ANA_SOLD_TO_PARTY",a.Contains,n))}if(l){t.push(new s("MATNR_MATERIAL",a.Contains,l))}if(r&&u){t.push(new s("FKDAT_ANA_BILLING_DATE",a.BT,r,u))}this._applyTableFilters(t)},onFilterBarClear:function(){const t=this.getView();t.byId("filterSalesOrg").setValue("");t.byId("filterCustomer").setValue("");t.byId("filterProduct").setValue("");t.byId("filterDate").setValue("");this._applyTableFilters([])},onFilterLadega:function(){const t=new s("MATNR_MATERIAL",a.Contains,"Ladega");this._applyTableFilters([t])},onFilterCystadrops:function(){const t=new s("MATNR_MATERIAL",a.Contains,"Cystadrops");this._applyTableFilters([t])},_applyTableFilters:function(t){this.getView().byId("salesTable").getBinding("items").filter(t);this._updateSummaryPanel(t)},_updateSummaryPanel:function(t){const e=this.getView().getModel();if(!e){return}const s="aggregate("+"NETWR_NET_VALUE with sum as TotalSales,"+"FKIMG_INVOICED_QUANTITY with sum as TotalUnits,"+"$count as TotalLines,"+"VBELN_BILLING_DOCUMENT with countdistinct as TotalInvoices"+")";const a=e.bindList("/PIVOTTABLE",null,null,t,{$apply:s});a.requestContexts(0,1).then(t=>{if(t&&t.length>0){const e=t[0].getObject();this.byId("totalSales").setValue(e.TotalSales||"0.00");this.byId("totalUnits").setValue(e.TotalUnits||"0");this.byId("totalLines").setValue(e.TotalLines||"0");this.byId("totalInvoices").setValue(e.TotalInvoices||"0")}}).catch(t=>{console.error("Error fetching summary data:",t);i.show("Could not load summary data.")})}})});
//# sourceMappingURL=View1.controller.js.map