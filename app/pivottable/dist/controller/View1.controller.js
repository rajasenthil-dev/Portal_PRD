sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel"],(e,a)=>{"use strict";return e.extend("pivottable.controller.View1",{onInit:async function(){const e=this.getOwnerComponent().getModel("userModel");const o=e?e.getData():{};const n=o.ManufacturerNumber;const t=this.getOwnerComponent().getModel("logo");var r=sap.ui.require.toUrl("pivottable").split("/resources")[0];if(r==="."){r=""}const u=r+"/images/MCKCAN1.jpg";if(!n){console.warn("No ManufacturerNumber in user model. Showing fallback logo.");oView.byId("logoImage").setSrc(u);return}const c=new sap.ui.model.Filter("manufacturerNumber","EQ",n);const s=t.bindList("/MediaFile",undefined,undefined,[c]);s.requestContexts().then(function(e){if(e&&e.length>0){const a=e[0].getObject();const o=a.url.replace(/^.*(?=\/odata\/v4\/media)/,"");const n=r+o;oView.byId("logoImage").setSrc(n)}else{console.warn("No matching logo found. Fallback image used.");oView.byId("logoImage").setSrc(u)}}.bind(this)).catch(function(e){console.error("Binding error:",e);oView.byId("logoImage").setSrc(u)}.bind(this));const l=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];let m=[{name:"Ontario",type:"Province",jan:1e3,feb:1100,mar:1200,apr:1050,may:1150,jun:1250,jul:1300,aug:1350,sep:1400,oct:1450,nov:1500,dec:1600,children:[{name:"Customer Alpha (ON)",type:"Customer",jan:500,feb:600,mar:700,apr:550,may:650,jun:750,jul:800,aug:850,sep:900,oct:950,nov:1e3,dec:1100},{name:"Customer Beta (ON)",type:"Customer",jan:300,feb:300,mar:300,apr:300,may:300,jun:300,jul:300,aug:300,sep:300,oct:300,nov:300,dec:300},{name:"Customer Gamma (ON)",type:"Customer",jan:200,feb:200,mar:200,apr:200,may:200,jun:200,jul:200,aug:200,sep:200,oct:200,nov:200,dec:200}]},{name:"Quebec",type:"Province",jan:800,feb:850,mar:900,apr:750,may:820,jun:880,jul:920,aug:950,sep:980,oct:1e3,nov:1020,dec:1050,children:[{name:"Customer Delta (QC)",type:"Customer",jan:400,feb:450,mar:500,apr:350,may:420,jun:480,jul:520,aug:550,sep:580,oct:600,nov:620,dec:650},{name:"Customer Epsilon (QC)",type:"Customer",jan:400,feb:400,mar:400,apr:400,may:400,jun:400,jul:400,aug:400,sep:400,oct:400,nov:400,dec:400}]},{name:"British Columbia",type:"Province",jan:1200,feb:1250,mar:1300,apr:1150,may:1220,jun:1280,jul:1320,aug:1350,sep:1380,oct:1400,nov:1420,dec:1450,children:[]},{name:"Alberta",type:"Province",jan:0,feb:0,mar:0,apr:0,may:0,jun:0,jul:0,aug:0,sep:0,oct:0,nov:0,dec:0,children:[{name:"Customer Zeta (AB)",type:"Customer",jan:700,feb:710,mar:720,apr:730,may:740,jun:750,jul:760,aug:770,sep:780,oct:790,nov:800,dec:810}]}];let i={jan:0,feb:0,mar:0,apr:0,may:0,jun:0,jul:0,aug:0,sep:0,oct:0,nov:0,dec:0,grandTotal:0};function d(e){let a=0;l.forEach(o=>{const n=typeof e[o]==="number"?e[o]:0;e[o]=n;a+=n;i[o]+=n});let o=0;if(e.children&&e.children.length>0){e.children.forEach(e=>{o+=d(e)})}e.total=a+o;return e.total}m.forEach(e=>{d(e)});m.forEach(e=>{i.grandTotal+=e.total});var p=new a({salesData:m,footerTotals:i});this.getView().setModel(p,"salesModel")}})});
//# sourceMappingURL=View1.controller.js.map