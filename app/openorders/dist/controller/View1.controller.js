sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/ui/core/format/NumberFormat"],(e,t,r)=>{"use strict";return e.extend("openorders.controller.View1",{_bFilterBarInitialized:false,onInit(){this._bFilterBarInitialized=false;var e=this.getOwnerComponent().getModel();const r=this.getView();const i=r.byId("bar0");r.setBusy(true);i.attachInitialized(function(){r.setBusy(false)});const o=this.getView().byId("table0");const a=o.getTable();this.bAuthorizationErrorShown=false;e.attachRequestFailed(function(e){var r=e.getParameters();if(r.response.statusCode==="403"){a.setNoData("No data available due to authorization restrictions");a.setBusy(false);if(!this.bAuthorizationErrorShown){this.bAuthorizationErrorShown=true;t.error("You do not have the required permissions to access this report.",{title:"Unauthorized Access",id:"messageBoxId1",details:"Permission is required to access this report. Please contact your administrator if you believe this is an error or require access.",contentWidth:"100px"})}}});var n=this.getOwnerComponent().getModel("logo");var s=n.bindList("/MediaFile");s.requestContexts().then(function(e){if(e.length>0){var t=e[0].getObject();console.log("Manufacturer:",t.MFGName);console.log("File URL:",t.url);var r=sap.ui.require.toUrl("openorders").split("/resources")[0];if(r==="."){r=""}console.log("âœ… Dynamic Base Path:",r);var i=r+t.url;this.getView().byId("logoImage").setSrc(i)}else{console.log("No media found for this manufacturer.")}}.bind(this));a.attachEvent("rowsUpdated",this._calculateTotals.bind(this))},onAfterRendering:function(){if(!this._bFilterBarInitialized){var e=this.byId("bar0");if(e){console.log("Setting FilterBar busy in onAfterRendering");e.setBusy(true)}}},onFilterBarInitialised:function(e){console.log("FilterBar initialise event fired");var t=e.getSource();t.setBusy(false);this._bFilterBarInitialized=true},onBeforeRebindTable:function(e){var t=this.byId("table0");t.setBusy(true);var r=e.getParameter("bindingParams");r.events=r.events||{};r.events.dataReceived=function(e){t.setBusy(false)}.bind(this)},_calculateTotals:function(e){var t=r.getIntegerInstance({groupingEnabled:true});var i=r.getFloatInstance({groupingEnabled:true,maxFractionDigits:3,minFractionDigits:0});var o=e.getSource();var a=o.getBinding("rows");if(a){var n=a.getLength();var s=a.getContexts(0,n);var l=n;var u=0;var c=new Set;if(s&&s.length>0){s.forEach(function(e){var t=e.getProperty("KWMENG");u+=parseFloat(t)||0;var r=e.getProperty("VBELN");if(r!==null&&r!==undefined){c.add(r)}})}var d=c.size;var g=t.format(l);var h=t.format(d);var f=i.format(u);this.byId("_IDGenNumericContent1").setText(g);this.byId("_IDGenNumericContent2").setText(h);this.byId("footerText1").setText(f)}else{this.byId("_IDGenNumericContent1").setText("0");this.byId("_IDGenNumericContent2").setText("0");this.byId("footerText1").setText("0");console.error("Row binding not found for table.")}}})});
//# sourceMappingURL=View1.controller.js.map