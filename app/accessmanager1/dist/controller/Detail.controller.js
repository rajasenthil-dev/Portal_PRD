sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox","sap/f/library","sap/ui/core/Core"],function(t,e,o,s,a){"use strict";return t.extend("accessmanager1.controller.Detail",{onInit:function(){var t=this.getOwnerComponent();this.oRouter=t.getRouter();this.oModel=t.getModel();const e=new sap.ui.model.json.JSONModel({isEdit:false,showFooter:false});this.getView().setModel(e,"viewState");this.oRouter.getRoute("master").attachPatternMatched(this._onProductMatched,this);this.oRouter.getRoute("detail").attachPatternMatched(this._onProductMatched,this)},_onProductMatched:function(t){this._product=t.getParameter("arguments").product||this._product||"0";var e="/"+this._product;this.getView().bindElement({path:e,model:"edit"})},onEditToggleButtonPress:function(){var t=this.getView().byId("ObjectPageLayout"),e=t.getShowFooter();t.setShowFooter(!e);const o=this.getView().getModel("viewState");const s=!o.getProperty("/isEdit");o.setProperty("/isEdit",s);sap.m.MessageToast.show(s?"Edit mode enabled":"Edit mode disabled")},onCancel:function(){const t=this.getView();const e=t.byId("ObjectPageLayout");const o=t.getModel("viewState");o.setProperty("/isEdit",false);e.setShowFooter(false);sap.m.MessageToast.show("Edit cancelled");this.oRouter.navTo("master",{layout:s.LayoutType.OneColumn})},onSave:function(){const t=this.getView();const e=this.getOwnerComponent().getModel();const o=this.getOwnerComponent().getRouter();const s=sap.f.library;const a=t.getBindingContext("edit");if(!a){return sap.m.MessageBox.error("Cannot save: No binding context.")}const i=a.getObject();const r="/OKTAUsers('"+i.id+"')";t.setBusy(true);e.update(r,i,{success:()=>{t.setBusy(false);sap.m.MessageToast.show("✅ User updated successfully");this._exitEditMode?.();const e=this._getMasterList?.();if(e){e.getBinding("items").refresh()}this.oRouter.navTo("master",{layout:s.LayoutType.OneColumn})},error:e=>{t.setBusy(false);console.error("❌ Save Error",e);sap.m.MessageBox.error("Update failed — check input or permissions.")},merge:true})},onExit:function(){this.oRouter.getRoute("master").detachPatternMatched(this._onProductMatched,this);this.oRouter.getRoute("detail").detachPatternMatched(this._onProductMatched,this)}})});
//# sourceMappingURL=Detail.controller.js.map